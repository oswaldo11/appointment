{"version":3,"sources":["../../../../client/components/calendar/controllers/CalendarCtrl.js"],"names":[],"mappings":"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","file":"CalendarCtrl.js","sourcesContent":["'use strict';\r\n\r\nangular.module('eventsMongoApp').controller('CalendarCtrl', function($scope, $log, $timeout, socket,CalendarEvent,Auth) {\r\n\r\n  $scope.userInfo = {}  \r\n  $scope.getCurrentUser = Auth.getCurrentUser;\r\n  $scope.getCurrentUser(function(user) {\r\n    $scope.currentUser = user;\r\n    $scope.userInfo.user = $scope.currentUser.name;\r\n    $scope.userInfo.createdDate = new Date();\r\n  });\r\n  \r\n  $scope.newEvent = {};\r\n\r\n  $scope.addEvent = function() {\r\n    var newEventDefaults = {\r\n      title: \"Untitled Event\",\r\n      description: \"\",\r\n      className: \"\",\r\n      icon: \"\",\r\n      allDay: false,\r\n      creator: $scope.currentUser._id,\r\n      User:{}\r\n    };\r\n\r\n    $scope.newEvent = angular.extend(newEventDefaults, $scope.newEvent);\r\n    if ($scope.newEvent._id) {\r\n\r\n      CalendarEvent.update({\r\n        id: $scope.newEvent._id\r\n      }, $scope.newEvent).$promise.then(function() {\r\n        Materialize.toast('Event updated.', 2000, '', function() { });\r\n      }, function(error) { // error handler\r\n        if (error.data.errors) {\r\n          var err = error.data.errors;\r\n          console.log(err[Object.keys(err)].message, err[Object.keys(err)].name);\r\n        } else {\r\n          var msg = error.data.message;\r\n          console.log(msg);\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      CalendarEvent.save($scope.newEvent).$promise.then(function() {\r\n        Materialize.toast('Event added.', 2000, '', function() { });\r\n\t\t\t\t\t}, function(error) { // error handler\r\n\t\t\t\t\t\tif (error.data.errors) {\r\n\t\t\t\t\t\t\tvar err = error.data.errors;\r\n\t\t\t\t\t\t\tconsole.log(err[Object.keys(err)].message, err[Object.keys(err)].name);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar msg = error.data.message;\r\n\t\t\t\t\t\t\tconsole.log(msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n    }\r\n    \r\n    $timeout(function() {\r\n      $scope.newEvent = {};\r\n      $('.event-collapse').sideNav('hide');\r\n    });\r\n  };\r\n\r\n  $scope.deleteEvent = function()\r\n  {    \r\n    if (!$scope.newEvent._id) return;\r\n    CalendarEvent.delete({ id: $scope.newEvent._id })\r\n      .$promise.then(function(response) {\r\n        Materialize.toast('Event deleted.', 2000, '', function() { });\r\n        $('.event-collapse').sideNav('hide');\r\n      }, function(error) { // error handler\r\n        if (error.data.errors) {\r\n          var err = error.data.errors;\r\n          console.log(err[Object.keys(err)].message, err[Object.keys(err)].name);\r\n        } else {\r\n          var msg = error.data.message;\r\n          console.log(msg);\r\n        }\r\n      });\r\n  }\r\n\r\n  $scope.$on('$destroy', function () {\r\n    socket.unsyncUpdates(\"events\");\r\n  });\r\n});\r\n"]}
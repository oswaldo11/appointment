{"version":3,"sources":["../../../../client/components/calendar/directives/fullCalendar.js"],"names":[],"mappings":"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","file":"fullCalendar.js","sourcesContent":["\"use strict\";\r\n\r\nangular.module('eventsMongoApp').directive('fullCalendar', function (CalendarEvent, $log, $timeout, $compile) {\r\n\r\n    var lnk = function (scope, element) {\r\n        var $calendar = $(\"#calendar\");\r\n        var calendar = null;\r\n\r\n        $('.event-collapse').sideNav({\r\n            menuWidth: 450,\r\n            edge: 'right'\r\n        });\r\n\r\n        $('.event-close-collapse').click(function () {\r\n            $('.event-collapse').sideNav('hide');\r\n        });\r\n\r\n        var alertOnEventClick = function(date, jsEvent, view) {\r\n          console.log(date);\r\n          $('.event-collapse').sideNav('show');\r\n          scope.focus = true;\r\n          $timeout(function() {\r\n            scope.newEvent = angular.copy(date);\r\n            scope.newEvent.className = date.className.join(' ');\r\n                scope.eve = {\r\n                    name: date.title,\r\n                    start: moment(date.start).format('MMM, D dddd'),\r\n                    from: moment(date.start).format('h:mm A'),\r\n                    to: moment(date.end || date.start).format('h:mm A')\r\n\r\n                };\r\n            });\r\n        };\r\n        function initCalendar() {\r\n\r\n            calendar = $calendar.fullCalendar({\r\n                lang: 'en',\r\n                editable: true,\r\n                draggable: true,\r\n                selectable: true,\r\n                selectHelper: true,\r\n                unselectAuto: false,\r\n                disableResizing: false,\r\n                droppable: true,\r\n                eventLimit: true, // allow \"more\" link when too many events\r\n                header: {\r\n                    left: 'title', //,today\r\n                    center: 'prev, next, today',\r\n                    right: 'month, agendaWeek, agendaDay' //month, agendaDay,\r\n                },\r\n                defaultView: 'agendaDay',\r\n                eventClick: alertOnEventClick,\r\n                eventDrop: function(event, delta, revertFunc, jsEvent, ui, view) {\r\n                  var defaultDuration = moment.duration($('#calendar').fullCalendar('option', 'defaultTimedEventDuration'));\r\n                  var end = event.end || event.start.clone().add(defaultDuration);\r\n                  console.log('end is ' + end.format());\r\n                  scope.newEvent = angular.copy(event);\r\n                  scope.newEvent.className = event.className.join(' ');\r\n                  scope.addEvent();\r\n                },\r\n                eventResize: function(event, delta, revertFunc) {\r\n                  console.log(event._id);\r\n                  console.log(\"Start time: \" + event.start.format() + \"end time: \" + event.end.format());\r\n                  scope.newEvent = angular.copy(event);\r\n                  scope.newEvent.className = event.className.join(' ');\r\n                  scope.addEvent();\r\n\r\n                },\r\n\t              timeFormat: 'H(:mm)',\r\n                  drop: function (date, jsEvent, ui, resourceId) {\r\n                    // this function is called when something is dropped\r\n                    // retrieve the dropped element's stored Event Object\r\n                    var originalEventObject = $(this).data('eventObject');\r\n                    \r\n                    // we need to copy it, so that multiple events don't have a reference to the same object\r\n                    var copiedEventObject = $.extend({}, originalEventObject);\r\n\r\n                    var defaultDuration = moment.duration($('#calendar').fullCalendar('option', 'defaultTimedEventDuration'));\r\n                    var end = date.clone().add(defaultDuration); // on drop we only have date given to us\r\n                    \r\n                    \r\n                    \r\n                    copiedEventObject.start = date.format();\r\n                    copiedEventObject.end = end.format();\r\n                    copiedEventObject.allDay = false;\r\n            \r\n                    // render the event on the calendar\r\n                    // the last `true` argument determines if the event \"sticks\" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)\r\n                    $('#calendar').fullCalendar('renderEvent', copiedEventObject, false);\r\n            \r\n                    // is the \"remove after drop\" checkbox checked?\r\n                    if ($('#drop-remove').is(':checked')) {\r\n                        // if so, remove the element from the \"Draggable Events\" list\r\n                        // $(this).remove();\r\n                        // $log.log($(this).scope());\r\n                        var index = $(this).scope().$index;\r\n                        $(\"#external-events\").scope().eventsExternal.splice(index, 1);\r\n                        $(this).remove();\r\n                    }\r\n                  scope.newEvent = angular.copy(copiedEventObject);\r\n                  scope.addEvent();\r\n                },\r\n\r\n                select: function (start, end, allDay) {\r\n                  scope.newEvent = {};\r\n                    $timeout(function () {\r\n                      $('.event-collapse').sideNav('show');\r\n                        scope.focus = true;\r\n                        scope.eve = {\r\n                            start: moment(start).format('MMM, D dddd'),\r\n                            from: moment(start).format('h:mm A'),\r\n                            to: moment(end || start).format('h:mm A')\r\n                        };\r\n                        scope.newEvent.start = start,//moment(start).format('DD MMM YYYY hh:mm a');\r\n                        scope.newEvent.end = end,//moment(end).format('DD MMM YYYY hh:mm a');\r\n                        scope.newEvent.allday = allDay;\r\n                    });\r\n                    calendar.fullCalendar('unselect');\r\n                },\r\n\r\n                // events: scope.events,\r\n                events: function (start, end, timezone, callback) {\r\n                    // console.log(scope.events);\r\n                    callback(scope.events);\r\n                },\r\n                eventRender: function (event, element, icon) {\r\n                        // if (!event.description == \"\") {\r\n                        //     element.find('.fc-title').append(\"<br/><span class='ultra-light'>\" + event.description + \"</span>\");\r\n                        // }\r\n                        if (!event.icon == \"\") {\r\n                            element.find('.fc-title').append(\"<i class=' fc-icon-top-right \" + event.icon + \" '></i>\");\r\n                        }\r\n                    }\r\n            });\r\n\r\n            $('.fc-header-right, .fc-header-center', $calendar).hide();\r\n\r\n\r\n            var fscroll = $(\".fc-scroller\").height();           \r\n            $('.fc-scroller').height(fscroll).perfectScrollbar({\r\n                suppressScrollX: true\r\n            });\r\n            \r\n            var eve = $(\"#event-out\").height();             \r\n            $('.events-side-navigation').height(eve).perfectScrollbar({\r\n                suppressScrollX: true\r\n            });\r\n\r\n\r\n            $('#bdate').pickadate({\r\n              container: 'body',\r\n              onClose: function(){\r\n                $(document.activeElement).blur()\r\n              }\r\n            });\r\n            $('#input_starttime').pickatime({\r\n                twelvehour: true,\r\n                container: 'body'\r\n            });          \r\n              \r\n\r\n\r\n        }\r\n\r\n\r\n        initCalendar();\r\n\r\n\r\n        // Now events will be refetched every time events scope is updated in controller!!!\r\n        scope.$watch(\"events\", function (newValue, oldValue) {\r\n\r\n            $calendar.fullCalendar('refetchEvents');\r\n\r\n        }, true);\r\n    };\r\n\r\n    return {\r\n        restrict: 'E',\r\n        replace: true,\r\n        templateUrl: 'components/calendar/views/full-calendar.tpl.html',\r\n        scope: {\r\n            events: \"=events\"\r\n        },\r\n        controller: 'CalendarCtrl',\r\n        link: lnk\r\n    };\r\n})\r\n.directive('focus',\r\nfunction($timeout) {\r\n return {\r\n scope : {\r\n   trigger : '@focus'\r\n },\r\n link : function(scope, element) {\r\n  scope.$watch('trigger', function(value) {\r\n    if (value === \"true\") {\r\n      $timeout(function() {\r\n       element[0].focus();\r\n      });\r\n   }\r\n });\r\n }\r\n};\r\n}); \r\n    \r\n "]}